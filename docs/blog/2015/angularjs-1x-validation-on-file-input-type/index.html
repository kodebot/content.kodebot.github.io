
<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="generator" content="Hugo 0.54.0" />
  <meta name="description" content="">


  <link rel="icon" href="/images/favicon.ico" type="image/png">
  <title>AngularJS 1.x - Validation on File Input type - Kodebot</title>

  
  <link href="/css/nucleus.css?1565983495" rel="stylesheet">
  <link href="/css/fontawesome-all.min.css?1565983495"
    rel="stylesheet">
  <link href="/css/hybrid.css?1565983495" rel="stylesheet">
  <link href="/css/featherlight.min.css?1565983495" rel="stylesheet">
  <link href="/css/perfect-scrollbar.min.css?1565983495"
    rel="stylesheet">
  <link href="/css/auto-complete.css?1565983495" rel="stylesheet">
  <link href="/css/atom-one-dark-reasonable.css?1565983495"
    rel="stylesheet">
  <link href="/css/theme.css?1565983495" rel="stylesheet">
  <link href="/css/hugo-theme.css?1565983495" rel="stylesheet">
  
  <link href="/css/theme-mine.css?1565983495"
    rel="stylesheet">
  

  <script src="/js/jquery-3.3.1.min.js?1565983495"></script>

  <style type="text/css">
    :root #header+#content>#left>#rlblock_left {
      display: none !important;
    }

      {
        {
        if .Site.Params.disableInlineCopyToClipBoard
      }
    }

    :not(pre)>code+span.copy-to-clipboard {
      display: none;
    }

      {
        {
        end
      }
    }
  </style>
  
</head>

<body class="" data-url="/blog/2015/angularjs-1x-validation-on-file-input-type/">
  <nav class="main-menu">
    <div class="logo">
        <a href="https://kodebot.com/">
            <img src="/images/logo.png" style="background: white; padding-right: 2px;">
        </a>
    </div>
    <ul>
        
        
        
                
        <li >
            <a href="/blog/" 
            class="active"
            >
                Blog
            </a>
        </li>

        
                
        <li >
            <a href="/tutorials/" >
                Tutorials
            </a>
        </li>

        
                
        <li >
            <a href="/about/" >
                About
            </a>
        </li>

        
        
    </ul>
</nav>
  <section id="body" class="no-sidebar">
    <div id="overlay"></div>
    <div class="padding highlightable">
      
      <div>
        
        
        <div id="top-bar">
          


          <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
            <span class="links">
              
          
          
          
          
          
          
          
          
          
          
          <a href='/'>Kodebot</a> > <a href='/blog/'>Blog</a> > AngularJS 1.x - Validation on File Input type
          
          
          
          
          
          
            </span>
          </div>
        </div>
        
      </div>
      
      <div id="head-tags">
        
<div class="tags">

  <a class="tag-link" href="/tags/javascript">JavaScript</a>

  <a class="tag-link" href="/tags/angularjs">AngularJS</a>

</div>

      </div>
      
        <div id="body-inner">
          
          <h1>
            
            AngularJS 1.x - Validation on File Input type
          </h1>
          

          

<p><h3>Introduction</h3> <p>You might already known that AngularJS 1.x <a href="https://github.com/angular/angular.dart/issues/1094" target="_blank">doesn’t support</a> model binding for File Input type at the moment. This means, implementing any validation on File Input type is not straight forward as validation entirely depends on model binding.</p> <p>I have come across a requirement where, I need to create a form <!-- more -->with ‘required’ validation on File Input type and I also need to display bootstrap form feedback. There are number of <a href="http://stackoverflow.com/a/20506037/3208697" target="_blank">great solutions out there</a> to make file upload with angular easier but none of them provide easier way to enforce validation.</p> <h5>What I did?</h5> <p>First I have made file input type to look like a button as explained <a href="http://www.abeautifulsite.net/whipping-file-inputs-into-shape-with-bootstrap-3/" target="_blank">here</a>, and then made it as an add-on to a normal disabled text input as follows</p></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#f92672">&lt;div</span> <span style="color:#a6e22e">class=</span><span style="color:#e6db74">&#34;form-group&#34;</span><span style="color:#f92672">&gt;</span>
    <span style="color:#f92672">&lt;label</span> <span style="color:#a6e22e">class=</span><span style="color:#e6db74">&#34;col-md-2 control-label&#34;</span> <span style="color:#a6e22e">for=</span><span style="color:#e6db74">&#34;photoUrl&#34;</span><span style="color:#f92672">&gt;</span>Photo<span style="color:#f92672">&lt;/label&gt;</span>
    <span style="color:#f92672">&lt;div</span> <span style="color:#a6e22e">class=</span><span style="color:#e6db74">&#34;col-md-4&#34;</span><span style="color:#f92672">&gt;</span>
        <span style="color:#f92672">&lt;div</span> <span style="color:#a6e22e">class=</span><span style="color:#e6db74">&#34;input-group&#34;</span><span style="color:#f92672">&gt;</span>
            <span style="color:#f92672">&lt;span</span> <span style="color:#a6e22e">class=</span><span style="color:#e6db74">&#34;btn btn-primary btn-file input-group-addon&#34;</span><span style="color:#f92672">&gt;</span>
                Browse <span style="color:#f92672">&lt;input</span> <span style="color:#a6e22e">type=</span><span style="color:#e6db74">&#34;file&#34;</span> <span style="color:#a6e22e">id=</span><span style="color:#e6db74">&#34;photoUrlSelector&#34;</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;photoUrlSelector&#34;</span> <span style="color:#a6e22e">accept=</span><span style="color:#e6db74">&#34;image/*&#34;</span> <span style="color:#f92672">&gt;</span>
            <span style="color:#f92672">&lt;/span&gt;</span>
            <span style="color:#f92672">&lt;input</span> <span style="color:#a6e22e">class=</span><span style="color:#e6db74">&#34;form-control&#34;</span> <span style="color:#a6e22e">type=</span><span style="color:#e6db74">&#34;text&#34;</span> <span style="color:#a6e22e">id=</span><span style="color:#e6db74">&#34;photoUrl&#34;</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;photoUrl&#34;</span> <span style="color:#a6e22e">data-ng-disabled=</span><span style="color:#e6db74">&#34;true&#34;</span><span style="color:#f92672">&gt;</span>
        <span style="color:#f92672">&lt;/div&gt;</span>
    <span style="color:#f92672">&lt;/div&gt;</span>
<span style="color:#f92672">&lt;/div&gt;</span></code></pre></div>
<p>The output looks like this:</p>

<figure>
	<img src="/blog/2015/angularjs-1x-validation-on-file-input-type/images/image_4.png" alt="" />
	<figcaption></figcaption>
</figure>



<p>Next, I have used <a href="https://github.com/danialfarid/ng-file-upload" target="_blank">ng-file-upload</a> to make file selection update the model and made $touched property of the form field true on mouse click. So,</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#f92672">&lt;span</span> <span style="color:#a6e22e">class=</span><span style="color:#e6db74">&#34;btn btn-primary btn-file input-group-addon&#34;</span><span style="color:#f92672">&gt;</span>
    Browse <span style="color:#f92672">&lt;input</span> <span style="color:#a6e22e">type=</span><span style="color:#e6db74">&#34;file&#34;</span> <span style="color:#a6e22e">id=</span><span style="color:#e6db74">&#34;photoUrlSelector&#34;</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;photoUrlSelector&#34;</span> <span style="color:#a6e22e">accept=</span><span style="color:#e6db74">&#34;image/*&#34;</span><span style="color:#f92672">&gt;</span>
<span style="color:#f92672">&lt;/span&gt;</span></code></pre></div>
<p>is changed as follows</p>

<pre><code>&lt;span class=&quot;btn btn-primary btn-file input-group-addon&quot;&gt;
    Browse &lt;input type=&quot;file&quot; id=&quot;photoUrlSelector&quot; name=&quot;photoUrlSelector&quot; ngf-select ng-model=&quot;vm.author.photoUrl&quot; accept=&quot;image/*&quot; data-ng-click=&quot;addAuthorForm.photoUrl.$touched=true&quot;&gt;
&lt;/span&gt;
</code></pre>

<p>Then, the first file name is set as model for the text input type as follows, so it shows the selected file</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#f92672">&lt;input</span> <span style="color:#a6e22e">class=</span><span style="color:#e6db74">&#34;form-control&#34;</span> <span style="color:#a6e22e">type=</span><span style="color:#e6db74">&#34;text&#34;</span> <span style="color:#a6e22e">id=</span><span style="color:#e6db74">&#34;photoUrl&#34;</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;photoUrl&#34;</span> <span style="color:#a6e22e">data-ng-model=</span><span style="color:#e6db74">&#34;vm.author.photoUrl[0].name&#34;</span> <span style="color:#a6e22e">data-ng-required=</span><span style="color:#e6db74">&#34;true&#34;</span> <span style="color:#a6e22e">data-ng-disabled=</span><span style="color:#e6db74">&#34;true&#34;</span><span style="color:#f92672">&gt;</span></code></pre></div>
<p>as you can see, the input field is also decorated with ng-required directive to enforce required field validation.
<p>Now, until the File Input type is selected, the $touched property will be false and it will become true when user touches it. The user selected file object will be available in the model we used in the File Input type and selected file name will be shown in the text input type.</p>
<p>The File object can be used in your controller to send file to the back end or what ever you want to do with it. </p>
<p>After adding bootstrap feedback, the form group looks like this</p></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#f92672">&lt;div</span> <span style="color:#a6e22e">class=</span><span style="color:#e6db74">&#34;form-group has-feedback&#34;</span> <span style="color:#a6e22e">data-ng-class=</span><span style="color:#e6db74">&#34;{&#39;has-error&#39;:addAuthorForm.photoUrl.$invalid &amp;&amp; addAuthorForm.photoUrl.$touched,
</span><span style="color:#e6db74">     &#39;has-success&#39;:addAuthorForm.photoUrl.$valid &amp;&amp; addAuthorForm.photoUrl.$touched}&#34;</span><span style="color:#f92672">&gt;</span>
    <span style="color:#f92672">&lt;label</span> <span style="color:#a6e22e">class=</span><span style="color:#e6db74">&#34;col-md-2 control-label&#34;</span> <span style="color:#a6e22e">for=</span><span style="color:#e6db74">&#34;photoUrl&#34;</span><span style="color:#f92672">&gt;</span>Photo<span style="color:#f92672">&lt;/label&gt;</span>
    <span style="color:#f92672">&lt;div</span> <span style="color:#a6e22e">class=</span><span style="color:#e6db74">&#34;col-md-4&#34;</span><span style="color:#f92672">&gt;</span>
        <span style="color:#f92672">&lt;div</span> <span style="color:#a6e22e">class=</span><span style="color:#e6db74">&#34;input-group&#34;</span><span style="color:#f92672">&gt;</span>
            <span style="color:#f92672">&lt;span</span> <span style="color:#a6e22e">class=</span><span style="color:#e6db74">&#34;btn btn-primary btn-file input-group-addon&#34;</span><span style="color:#f92672">&gt;</span>
                Browse <span style="color:#f92672">&lt;input</span> <span style="color:#a6e22e">type=</span><span style="color:#e6db74">&#34;file&#34;</span> <span style="color:#a6e22e">id=</span><span style="color:#e6db74">&#34;photoUrlSelector&#34;</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;photoUrlSelector&#34;</span> <span style="color:#960050;background-color:#1e0010">ngf-select</span> <span style="color:#a6e22e">ng-model=</span><span style="color:#e6db74">&#34;vm.author.photoUrl&#34;</span> <span style="color:#a6e22e">accept=</span><span style="color:#e6db74">&#34;image/*&#34;</span> <span style="color:#a6e22e">data-ng-click=</span><span style="color:#e6db74">&#34;addAuthorForm.photoUrl.$touched=true&#34;</span><span style="color:#f92672">&gt;</span>
            <span style="color:#f92672">&lt;/span&gt;</span>
            <span style="color:#f92672">&lt;input</span> <span style="color:#a6e22e">class=</span><span style="color:#e6db74">&#34;form-control&#34;</span> <span style="color:#a6e22e">type=</span><span style="color:#e6db74">&#34;text&#34;</span> <span style="color:#a6e22e">id=</span><span style="color:#e6db74">&#34;photoUrl&#34;</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;photoUrl&#34;</span> <span style="color:#a6e22e">data-ng-model=</span><span style="color:#e6db74">&#34;vm.author.photoUrl[0].name&#34;</span> <span style="color:#a6e22e">data-ng-required=</span><span style="color:#e6db74">&#34;true&#34;</span> <span style="color:#a6e22e">data-ng-disabled=</span><span style="color:#e6db74">&#34;true&#34;</span><span style="color:#f92672">&gt;</span>
            <span style="color:#f92672">&lt;span</span> <span style="color:#a6e22e">data-ng-if=</span><span style="color:#e6db74">&#34;addAuthorForm.photoUrl.$invalid &amp;&amp; addAuthorForm.photoUrl.$touched&#34;</span> <span style="color:#a6e22e">class=</span><span style="color:#e6db74">&#34;glyphicon glyphicon-remove form-control-feedback&#34;</span><span style="color:#f92672">&gt;&lt;/span&gt;</span>
            <span style="color:#f92672">&lt;span</span> <span style="color:#a6e22e">data-ng-if=</span><span style="color:#e6db74">&#34;addAuthorForm.photoUrl.$valid &amp;&amp; addAuthorForm.photoUrl.$touched&#34;</span> <span style="color:#a6e22e">class=</span><span style="color:#e6db74">&#34;glyphicon glyphicon-ok form-control-feedback&#34;</span><span style="color:#f92672">&gt;&lt;/span&gt;</span>

        <span style="color:#f92672">&lt;/div&gt;</span>
    <span style="color:#f92672">&lt;/div&gt;</span>
    <span style="color:#f92672">&lt;span</span> <span style="color:#a6e22e">class=</span><span style="color:#e6db74">&#34;help-block&#34;</span><span style="color:#f92672">&gt;</span>
        <span style="color:#f92672">&lt;span</span> <span style="color:#a6e22e">data-ng-show=</span><span style="color:#e6db74">&#34;addAuthorForm.photoUrl.$error.required &amp;amp;&amp;amp; addAuthorForm.photoUrl.$touched&#34;</span><span style="color:#f92672">&gt;</span>The Photo is required field.<span style="color:#f92672">&lt;/span&gt;</span>
    <span style="color:#f92672">&lt;/span&gt;</span>
<span style="color:#f92672">&lt;/div&gt;</span></code></pre></div>
<p>Output with validation error looks like this</p>

<figure>
	<img src="/blog/2015/angularjs-1x-validation-on-file-input-type/images/image1.png" alt="" />
	<figcaption></figcaption>
</figure>


<p>and success looks like this</p>

<figure>
	<img src="/blog/2015/angularjs-1x-validation-on-file-input-type/images/image4.png" alt="" />
	<figcaption></figcaption>
</figure>


<h3>Conclusion</h3>
<p>This is not perfect but it does the job. We could also create a directive to hide away all the messy details but that is not necessary until you need to use this in many places in your application. </p>
<p>Please let me know if you know a better way to achieve this.</p>


<footer class=" footline" >
	
</footer>


        
        </div> 
        

      </div>

    <div id="navigation">
        
        
        
        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
        
                    
                        
            
            
        
                    
                        
            
            
        
                    
            
        
        
        


	 
	 
    </div>

    </section>
    
    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="/js/clipboard.min.js?1565983495"></script>
    <script src="/js/perfect-scrollbar.min.js?1565983495"></script>
    <script src="/js/perfect-scrollbar.jquery.min.js?1565983495"></script>
    <script src="/js/jquery.sticky.js?1565983495"></script>
    <script src="/js/featherlight.min.js?1565983495"></script>
    <script src="/js/html5shiv-printshiv.min.js?1565983495"></script>
    <script src="/js/highlight.pack.js?1565983495"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="/js/modernizr.custom-3.6.0.js?1565983495"></script>
    <script src="/js/learn.js?1565983495"></script>
    <script src="/js/hugo-learn.js?1565983495"></script>

    <link href="/mermaid/mermaid.css?1565983495" type="text/css" rel="stylesheet" />
    <script src="/mermaid/mermaid.js?1565983495"></script>
    <script>
        mermaid.initialize({ startOnLoad: true });
    </script>
    

  </body>
</html>
